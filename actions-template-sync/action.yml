name: Sync with Template
description: Runs Actions Template Sync

inputs:
  github_token:
    description: 'Token for the repo. Can be passed in using $\{{ secrets.GITHUB_TOKEN }}'
    required: true
  repository:
    description: 'The name of the sync source repository'
    required: true

runs:
  using: composite
  steps:
  - name: Copy resources
    run: cp -a $GITHUB_ACTION_PATH/resources/. .
    shell: bash
  - name: Install Task
    uses: arduino/setup-task@v1
    with:
      version: 3.x
  - name: Execute Actions Template Sync
    uses: AndreasAugustin/actions-template-sync@v1
    with:
      github_token: ${{ inputs.github_token }}
      source_repo_path: ${{ github.repository_owner }}/${{ inputs.repository }}
      is_allow_hooks: true
